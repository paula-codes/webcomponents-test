"use strict";var e=require("rollup-plugin-filesize"),i=require("as-table"),t=require("chalk");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=a(e),r=a(i);module.exports=function(e){function i(e){let[i,t]=e.split(" ");switch(t){case"B":return parseFloat(i);case"KB":return 1e3*parseFloat(i);case"MB":return 1e6*parseFloat(i);case"GB":return 1e9*parseFloat(i);default:return i}}function a(e){return e.toLocaleString("en",{maximumFractionDigits:2})}function o({value:e,isTotal:i,warnLow:l,warnHigh:r,totalLow:o,totalHigh:n,colored:u=!0}={}){let s;switch(e=parseFloat(e),!0){case e<1e3:s=a(e)+" B";break;case e>=1e3&&e<1e6:s=a(e/1e3)+" KB";break;case e>=1e6&&e<1e9:s=a(e/1e6)+" MB";break;default:s=String(e.toFixed())}if(u){const a=i?n:r;return function(e,i){switch(i){case"green":return t.green(e);case"yellow":return t.yellowBright(e);case"red":return t.red(e)}}(s,e<(i?o:l)?"green":e<a?"yellow":"red")}return s}let n=[],u={Name:"",Size:"",Minified:"",Gzipped:"",Brotli:""},s=0,d=0,c=0,p=0;const f={warnLow:e&&e.warnLow||5e3,warnHigh:e&&e.warnHigh||1e4,totalLow:e&&e.totalLow||2e5,totalHigh:e&&e.totalHigh||3e5};return{name:"rollup-plugin-summary",generateBundle:async function(...e){s=d=c=p=0,n=[],await l.default({showBrotliSize:!0,reporter:(e,t,{fileName:a,bundleSize:l,minSize:r,gzipSize:B,brotliSize:g})=>{s+=i(l||"0 B"),d+=i(r||"0 B"),c+=i(B||"0 B"),p+=i(g||"0 B"),n.push({Name:a,Size:o({value:i(l||"0 B"),...f}),Minified:o({value:i(r||"0 B"),...f}),Gzipped:o({value:i(B||"0 B"),...f}),Brotli:o({value:i(g||"0 B"),...f})});var m,z;u.Name=(m=u.Name,z=a,m.length>z.length?m:z)}}).generateBundle(...e),u={Name:u.Name,Size:o({value:s,isTotal:!0,...f,colored:!1}),Minified:o({value:d,isTotal:!0,...f,colored:!1}),Gzipped:o({value:c,isTotal:!0,...f,colored:!1}),Brotli:o({value:p,isTotal:!0,...f,colored:!1})};const a=e=>"-".repeat(e);n=n.sort((e,i)=>e.Name.localeCompare(i.Name)),n.push({Name:a(u.Name.length),Size:a(u.Size.length),Minified:a(u.Minified.length),Gzipped:a(u.Gzipped.length),Brotli:a(u.Brotli.length+2)},{Name:"Total",Size:o({value:s,isTotal:!0,...f}),Minified:o({value:d,isTotal:!0,...f}),Gzipped:o({value:c,isTotal:!0,...f}),Brotli:o({value:p,isTotal:!0,...f})}),console.info(`\n                \n${t.bold("ðŸ“„ Generated files:")}\n                \n${r.default(n.map(e=>({Name:e.Name,Size:e.Size,Minified:e.Minified,Gzipped:e.Gzipped,Brotli:e.Brotli})))}\n            `)}}};
//# sourceMappingURL=index.js.map
